# DNSMASQ Installation
# This is Required for the Openshift Instlaltion

# To Install the Required Packages 
yum -y install dnsmasq bind-utils

# dnsmasq Configuration
cat /etc/dnsmasq.conf
	resolv-file=/etc/resolv.dnsmasq
	address=/master.lab.example.com/192.168.1.20
	address=/node1.lab.example.com/192.168.1.21
	address=/node2.lab.example.com/192.168.1.22
	address=/registry.lab.example.com/192.168.1.20
	address=/services.lab.example.com/192.168.1.20
	address=/nfs.lab.example.com/192.168.1.20
	address=/apps.lab.example.com/192.168.1.20


# dns resolve configuration
cat /etc/resolv.conf
	# nameserver updated by /etc/NetworkManager/dispatcher.d/99-origin-dns.sh
	# Generated by NetworkManager
	search cluster.local lab.example.com
	nameserver 192.168.1.21
	nameserver 192.168.1.1

# copy the file as below
cp -pr /etc/resolv.conf /etc/resolv.dnsmasq
	#Note: /etc/resolv.dnsmasq file look like the following
	search cluster.local lab.example.com
	nameserver 192.168.1.20

# Restart the dnsmasq service
systemctl enable --now dnsmasq.service
systemctl restart dnsmasq
